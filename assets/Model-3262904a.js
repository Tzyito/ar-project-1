import{E as O,V as b,a as E,Q as g,S as _,P as y,b as R,A as x,c as C,d as M,M as D,e as T,W as j,C as A}from"./three.module-12fc4397.js";import{u as L}from"./useCamera-5f971a70.js";import{d as P,g as q,o as W,c as H,h as S}from"./index-0c8f6718.js";function v(d){const n=this;this.object=d,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation=null,this.screenOrientation=0,this.alphaOffset=0,this.initialOffset=null;const i=function({alpha:e,beta:t,gamma:a}){n.initialOffset===null&&(n.initialOffset=e),e=e-n.initialOffset,e<0&&(e+=360),n.deviceOrientation={alpha:e,beta:t,gamma:a}},o=function(){n.screenOrientation=window.orientation||0},r=function(){window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",i,!1)}.bind(this),f=function(){const e=new b(0,0,1),t=new E,a=new g,u=new g(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(s,l,c,w,h){t.set(c,l,-w,"YXZ"),s.setFromEuler(t),s.multiply(u),s.multiply(a.setFromAxisAngle(e,-h))}}();this.connect=function(){o(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(e){e=="granted"&&r()}).catch(function(e){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)}):r(),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o,!1),window.removeEventListener("deviceorientation",i,!1),n.enabled=!1,n.deviceOrientation=null,n.initialOffset=null},this.update=function({theta:e=0}={theta:0}){if(n.enabled===!1)return;const t=n.deviceOrientation;if(t){const a=t.alpha?(void 0).degToRad(t.alpha)+n.alphaOffset:0,u=t.beta?(void 0).degToRad(t.beta):0,s=t.gamma?(void 0).degToRad(t.gamma):0,l=n.screenOrientation?(void 0).degToRad(n.screenOrientation):0;f(n.object.quaternion,a+e,u,s,l)}},this.dispose=function(){n.disconnect()},this.getAlpha=function(){const{deviceOrientation:e}=n;return e&&e.alpha?(void 0).degToRad(e.alpha)+n.alphaOffset:0},this.getBeta=function(){const{deviceOrientation:e}=n;return e&&e.beta?(void 0).degToRad(e.beta):0}}v.prototype=Object.assign(Object.create(O.prototype),{constructor:v});const k=async()=>{let d;const n=new A,i=new _,o=new y(75,window.innerWidth/window.innerHeight,.1,1e3);o.position.set(100,100,100);const r=document.querySelector("#box"),f=await w(),e=new R(f);i.background=e;const t=new x(5e3);i.add(t);const a=new C(4210752);i.add(a);const u=new M(108,71),s=new D({color:"red"}),l=new T(u,s);i.add(l);const c=new j;c.setSize(window.innerWidth,window.innerHeight),r==null||r.appendChild(c.domElement),d=new v(o),window.addEventListener("resize",h);async function w(){const m=document.createElement("video");return m.srcObject=await L(!0),m.autoplay=!0,m}function h(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}function p(){requestAnimationFrame(p),d.update(n.getDelta()),c.render(i,o)}p()},z={id:"container"},B=S("div",{id:"box"},null,-1),V=[B],X=P({__name:"Model",setup(d){return q(()=>{k()}),(n,i)=>(W(),H("div",z,V))}});export{X as default};
